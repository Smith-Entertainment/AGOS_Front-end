<main class="container main mt-5">
    <div class="row justify-content-center">
        <form class="w bord col-6" (ngSubmit)="save()">
            <div class="d-flex  justify-content-center ">
                <h2 *ngIf="obra.id == null" class="font-title">Cadastro de Obra</h2>
                <h2 *ngIf="obra.id != null" class="font-title">Editar Obra</h2>
            </div>
            <br>
            <div *ngIf="erro" class="alert alert-primary    " role="alert">
                {{ mensagem }}
            </div>
            <br>
            <h2>Informações Gerais</h2>
            <div class="d-flex justify-content-center gap">
                <div class="form-floating mb-3" [ngClass]="{'col-8': obra.id == null, 'col-4': obra.id > 0}">
                    <input type="text" class="form-control" name="Titulo" placeholder="Titulo" required
                        [(ngModel)]="obra.titulo">
                    <label for="Titulo">Título</label>
                </div>

                <div class="form-floating mb-3 col-4">
                    <select placeholder="Tipo Obra" class="form-select" id="tipoObra" name="tipoObra" required
                        [(ngModel)]="obra.tipoObra">
                        <option *ngFor="let tipoObra of tipos" [ngValue]="tipoObra">{{tipoObra}}</option>
                    </select>
                    <label for="tipoObra">Tipo Obra</label>
                </div>
                <div class="form-floating mb-3 col-4" *ngIf="obra.id != null">
                    <select class="form-select" id="situacao" name="situacao" [(ngModel)]="obra.situacao" required>
                        <option placeholder="Situação" *ngFor="let situacao of situacoes" [ngValue]="situacao">
                            {{situacao}}</option>
                    </select>
                    <label for="situacao">Situação</label>
                </div>
            </div>
            <h2>Endereço</h2>
            <div class="d-flex justify-content-center gap-4">
                <div class="form-floating mb-3 col-1.5">
                    <input maxlength="8" type="text" class="form-control" name="CEP" placeholder="CEP"
                        required [(ngModel)]="obra.cep" (input)="maskCEP($event)">
                    <label for="CEP">CEP</label>
                </div>
                <div class="form-floating mb-3 col-4">
                    <input type="text" class="form-control " name="rua" placeholder="Rua" [(ngModel)]="obra.rua"
                        required>
                    <label for="Rua">Rua</label>
                </div>
                <div class="form-floating mb-3 col-4">
                    <input type="text" class="form-control" name="nome" placeholder="Bairro" required
                        [(ngModel)]="bairro.nome">
                    <label for="Bairro">Bairro</label>
                </div>
                <div class="form-floating mb-3 col-1">
                    <input type="number" class="form-control" name="numeroEndereco" placeholder="Numero" required
                        [(ngModel)]="obra.numeroEndereco">
                    <label for="Numero">Número</label>
                </div>
            </div>
            <h2>Edital </h2>
            <div class="d-flex justify-content-center gap">
                <div class="form-floating mb-3 col-4 w-20  form input-tree">
                    <input type="text" class="form-control form" name="licitacao" placeholder="Licitação" required
                        [(ngModel)]="obra.licitacao">
                    <label for="Licitação">Licitação</label>
                </div>
                <div class="form-floating mb-3 col-4">
                    <input type="date" class="form-control" name="dataCertame" placeholder="dataCertame"
                        [(ngModel)]="obra.dataCertame">
                    <label for="dataCertame">Data de Certame</label>
                </div>
                <div class="form-floating mb-3 col-4">
                    <input type="number" class="form-control " name="valorEdital" placeholder="ValorEdital" required
                        [(ngModel)]="obra.valorEdital">
                    <label for="ValorEdital">Valor do Edital</label>
                </div>
            </div>
            <div *ngIf="obra.id != null">
                <h2>Contrato </h2>
                <div class="d-flex justify-content-center gap ">
                    <div class="form-floating mb-3 col-3">
                        <input type="text" class="form-control" name="numeroContrato" placeholder="NumeroContrato"
                            [(ngModel)]="obra.numeroContrato">
                        <label for="NumeroContrato">Número do Contrato</label>
                    </div>

                    <div class="form-floating mb-3 col-3">
                        <input type="text" class="form-control" name="cnpj" placeholder="cnpj"
                            [(ngModel)]="empresa.cnpj" mask="00.000.000/0000-00">
                        <label for="NumeroContrato">CNPJ</label>
                    </div>

                    <div class="form-floating mb-3 col-3">
                        <input type="text" class="form-control" name="nome" placeholder="nome"
                            [(ngModel)]="empresa.nome">
                        <label for="NumeroContrato">Nome da Empresa</label>
                    </div>

                    <div class="form-floating mb-3 col-3">
                        <input type="number" class="form-control" name="valorContratado" placeholder="ValorContratado"
                            [(ngModel)]="obra.valorContratado">
                        <label for="ValorContratado">Valor Contratado</label>
                    </div>
                </div>
                <h2>Datas</h2>
                <div class="d-flex justify-content-center gap">
                    <div class="form-floating mb-3 col-6">
                        <input type="date" class="form-control" name="dataInicio" placeholder="dataInicio"
                            [(ngModel)]="obra.dataInicio">
                        <label for="dataInicio">Data de Ínicio</label>
                    </div>
                    <div class="form-floating mb-3 col-6">
                        <input type="date" class="form-control" name="dataTermino" placeholder="dataTermino"
                            [(ngModel)]="obra.dataTermino">
                        <label for="dataTermino">Data de Termíno</label>
                    </div>
                </div>

            </div>
            <div class="d-flex justify-content-center gap mt-5">
                <button class="btn btn-outline-success" *ngIf="obra.id == null"
                    [routerLink]="['/list/obra']">Voltar</button>
                <button class="btn btn-outline-success" *ngIf="obra.id != null"
                    [routerLink]="['/obra', obra.id]">Voltar</button>
                <button class="btn btn-success" *ngIf="obra.id == null" type="submit">Cadastar</button>
                <button class="btn btn-success" *ngIf="obra.id != null" type="submit">Atualizar</button>
            </div>
        </form>
    </div>
</main>